"use strict";const field=document.querySelector(".field"),btn=document.querySelector(".btn"),list=document.querySelector(".list"),apiBase="http://api.tvmaze.com/search/shows?q=",favList=document.querySelector(".fav__list");let fav=[];if(fav=JSON.parse(localStorage.getItem("favs")),null!==localStorage.getItem("favs"))for(const e of fav){const t=document.createElement("li"),i=document.createElement("h2"),c=document.createElement("img"),n=e.title,s=e.pic,a=document.createTextNode(n);i.appendChild(a),c.setAttribute("src",s),t.appendChild(i),t.appendChild(c),favList.appendChild(t)}const search=()=>{list.innerHTML=" ";const e=apiBase+field.value;fetch(e).then(e=>e.json()).then(e=>{for(let t=0;t<e.length;t++){const i=e[t].show,c=i.name,n=i.image,s=document.createElement("img"),a=document.createElement("h2"),l=document.createElement("li");l.setAttribute("class","item"),a.setAttribute("class","name"),s.setAttribute("class","img");const o=document.createTextNode(c);if(a.appendChild(o),l.addEventListener("click",function(e){const t=n.medium;favouriteShow(e,c,t)}),l.appendChild(s),l.appendChild(a),list.appendChild(l),null===n)s.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV");else if(null!==n){const e=n.medium;s.setAttribute("src",`${e}`)}}})};function favouriteShow(e,t,i){const c=e.currentTarget;if(c.classList.contains("item")?(c.classList.remove("item"),c.classList.add("item__favourite")):(c.classList.add("item"),c.classList.remove("item__favourite")),c.classList.contains("item__favourite")){const e={title:t,pic:i};fav.push(e)}const n=document.createElement("img"),s=document.createElement("h2"),a=document.createElement("li");n.setAttribute("src",i);const l=document.createTextNode(t);s.appendChild(l),a.appendChild(s),a.appendChild(n),favList.appendChild(a),localStorage.setItem("favs",JSON.stringify(fav))}btn.addEventListener("click",search),field.addEventListener("keyup",function(e){13===e.keyCode&&search()});