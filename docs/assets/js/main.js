"use strict";const field=document.querySelector(".field"),btn=document.querySelector(".btn"),list=document.querySelector(".list"),apiBase="http://api.tvmaze.com/search/shows?q=",favList=document.querySelector(".fav__list");let fav=[];if(fav=JSON.parse(localStorage.getItem("favs")),null!==localStorage.getItem("favs"))for(const e of fav){const t=document.createElement("li"),i=document.createElement("h2"),c=document.createElement("img"),s=e.title,a=e.pic,n=document.createTextNode(s);i.appendChild(n),c.setAttribute("src",a),t.appendChild(i),t.appendChild(c),favList.appendChild(t)}const search=()=>{list.innerHTML=" ";const e=apiBase+field.value;fetch(e).then(e=>e.json()).then(e=>{for(let t=0;t<e.length;t++){const i=e[t].show,c=i.name,s=i.image,a=document.createElement("img"),n=document.createElement("h2"),l=document.createElement("li");l.setAttribute("class","item"),n.setAttribute("class","name"),a.setAttribute("class","img");const o=document.createTextNode(c);if(n.appendChild(o),l.addEventListener("click",function(e){const t=s.medium;favouriteShow(e,c,t)}),l.appendChild(a),l.appendChild(n),list.appendChild(l),null===s)a.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV");else if(null!==s){const e=s.medium;a.setAttribute("src",`${e}`)}}})};function favouriteShow(e,t,i){const c=e.currentTarget;if(c.classList.contains("item")?(c.classList.remove("item"),c.classList.add("item__favourite")):(c.classList.add("item"),c.classList.remove("item__favourite")),c.classList.contains("item__favourite")){const e={title:t,pic:i};fav.push(e)}const s=document.createElement("img"),a=document.createElement("h2"),n=document.createElement("li");s.setAttribute("src",i);const l=document.createTextNode(t);a.appendChild(l),n.appendChild(a),n.appendChild(s),favList.appendChild(n),localStorage.setItem("favs",JSON.stringify(fav))}btn.addEventListener("click",search);